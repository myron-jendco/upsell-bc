<div id="layout-basic-ecom-9">
    <div class="product-popup" style="background: #ffffff">
		        <!-- new-modal header-->
<style>
.new-modal-content .new-modal-header {
    position: relative;
    padding: 18px 2.5rem;
}
.new-modal-content .new-modal-header__close {
    opacity: 1 !important;
    position: absolute;
    right: 6px;
    top: 28%;
    cursor: pointer;
}
</style>
<div class="new-modal-header" style="background: #ffffff">
    <h3 class="new-modal-header__title" style="color: rgba(17, 17, 17, 1)" role="heading" aria-level="1" data-uw-rm-heading="level">Keep Your Predator 750 Job-Ready</h3>
        <div class="new-modal-header__sub-title" style="color: rgba(17, 17, 17, 1)">
        Recommended Essentials for Peak Performance</div>
        <span class="new-modal-header__close close">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
            <path d="M6.7072 5.29289C6.31668 4.90237 5.68351 4.90237 5.29299 5.29289C4.90246 5.68342 4.90246 6.31658 5.29299 6.70711L10.5858 12L5.29289 17.2929C4.90237 17.6834 4.90237 18.3166 5.29289 18.7071C5.68342 19.0976 6.31658 19.0976 6.70711 18.7071L12 13.4142L17.293 18.7071C17.6835 19.0976 18.3167 19.0976 18.7072 18.7071C19.0977 18.3166 19.0977 17.6834 18.7072 17.2929L13.4143 12L18.7071 6.70711C19.0976 6.31658 19.0976 5.68342 18.7071 5.29289C18.3166 4.90237 17.6834 4.90237 17.2929 5.29289L12 10.5857L6.7072 5.29289Z" style="fill: rgba(17, 17, 17, 1)" fill="rgba(17, 17, 17, 1)"></path>
        </svg>
    </span>
    
</div>

                        <div class="d-flex justify-content-center">
                    </div>
		<div class="product-list">
                        			<div class="product-list__item modal-offer-product" data-peasi_product_type="offer" data-peasi_product_id="270" data-offer_product="{&quot;id&quot;:&quot;270&quot;,&quot;name&quot;:&quot;16\&quot;x16\&quot; Hog Hair Filters (Primary) 12\/case&quot;,&quot;price&quot;:57.6,&quot;original_price&quot;:57.6,&quot;list_modifier_variant&quot;:[],&quot;url&quot;:&quot;\/hog-hair-filters-16x16-12-cs\/&quot;,&quot;boost_option&quot;:[],&quot;cartMode&quot;:&quot;stockLeft&quot;,&quot;stockLeftCountdownBar&quot;:10,&quot;soldCountdownBar&quot;:90,&quot;stockLeftAmount&quot;:10,&quot;soldAmount&quot;:90,&quot;cartModeType&quot;:0,&quot;image&quot;:&quot;https:\/\/cdn11.bigcommerce.com\/s-8715e\/products\/270\/images\/370\/370__94001.1683837907.200.200.jpg?c=2&quot;,&quot;displayVariant&quot;:[],&quot;inventory_tracking&quot;:&quot;none&quot;,&quot;inventory_level&quot;:0,&quot;is_visible&quot;:true,&quot;availability&quot;:&quot;available&quot;,&quot;variants&quot;:[]}">
				<div class="product-list__item-content d-flex items-center justify-space-between border-bottom">
					<div class="d-flex items-center relative full-width">
                        						<div class="product-content__image">
							<img id="offer_img_270" src="https://cdn11.bigcommerce.com/s-8715e/products/270/images/370/370__94001.1683837907.200.200.jpg?c=2" target="_blank" href="https://www.jendcosafety.com/hog-hair-filters-16x16-12-cs/" data-uw-rm-alt-original="" alt="16&quot;x16&quot; Hog Hair Filters (Primary) 12/case" data-uw-rm-alt="CT">
						</div>
                        						<div class="product-content">
							<div class="offer-product-name fs-5 weight-medium" style="color: #192038;">16"x16" Hog Hair Filters (Primary) 12/case</div>
							<div class="product-price d-flex fs-5 weight-normal mt-8 offer-product-price">
                                                                <div class="price" style="color: rgba(255, 69, 0, 1)">$57.60</div>
                                							</div>
                            <div id="product-out-of-stock-270" class="new-modal-row out_of_stock" style="color: red"></div>
                                                                                                                                                                    </div>
                    </div>
					<div class="product-action d-flex items-center">
                                                <div class="number-input" style="color: #2E3A59;">
                            <input type="number" value="1" class="qtyInputLoose product-action__import weight-normal weight-normal product-quantity" min="0" max="8" style="background-color: #ffffff" data-uw-rm-form="fx" aria-label="Number" data-uw-hidden-control="hidden-control-element">
                            <div class="spinners">
                                <button class="spinner increment">▲</button>
                                <button class="spinner decrement">▼</button>
                            </div>
                        </div>
                                                <button id="ult-upsell-add-to-cart-270" class="btn-add fs-5 weight-medium text-white bg-black ml-6 pointer ult-upsell-add-to-cart" data-offer_item_price="57.6" data-offer_product="{&quot;id&quot;:&quot;270&quot;,&quot;name&quot;:&quot;16\&quot;x16\&quot; Hog Hair Filters (Primary) 12\/case&quot;,&quot;price&quot;:57.6,&quot;original_price&quot;:57.6,&quot;list_modifier_variant&quot;:[],&quot;url&quot;:&quot;\/hog-hair-filters-16x16-12-cs\/&quot;,&quot;boost_option&quot;:[],&quot;cartMode&quot;:&quot;stockLeft&quot;,&quot;stockLeftCountdownBar&quot;:10,&quot;soldCountdownBar&quot;:90,&quot;stockLeftAmount&quot;:10,&quot;soldAmount&quot;:90,&quot;cartModeType&quot;:0,&quot;image&quot;:&quot;https:\/\/cdn11.bigcommerce.com\/s-8715e\/products\/270\/images\/370\/370__94001.1683837907.200.200.jpg?c=2&quot;,&quot;displayVariant&quot;:[],&quot;inventory_tracking&quot;:&quot;none&quot;,&quot;inventory_level&quot;:0,&quot;is_visible&quot;:true,&quot;availability&quot;:&quot;available&quot;,&quot;variants&quot;:[]}" style="background-color: rgba(255, 69, 0, 1); color: #ffffff; border-radius: 12px;">
                                Add to cart
                        </button>
					</div>
				</div>
			</div>
            			<div class="product-list__item modal-offer-product" data-peasi_product_type="offer" data-peasi_product_id="273" data-offer_product="{&quot;id&quot;:&quot;273&quot;,&quot;name&quot;:&quot;16\&quot;x16\&quot;x2\&quot; Pleat Filter (Secondary) 12\/case&quot;,&quot;price&quot;:150,&quot;original_price&quot;:150,&quot;list_modifier_variant&quot;:[],&quot;url&quot;:&quot;\/pleat-filter-16x16x2-12-case\/&quot;,&quot;boost_option&quot;:[],&quot;cartMode&quot;:&quot;stockLeft&quot;,&quot;stockLeftCountdownBar&quot;:10,&quot;soldCountdownBar&quot;:90,&quot;stockLeftAmount&quot;:10,&quot;soldAmount&quot;:90,&quot;cartModeType&quot;:0,&quot;image&quot;:&quot;https:\/\/cdn11.bigcommerce.com\/s-8715e\/products\/273\/images\/373\/373__45567.1683838256.200.200.jpg?c=2&quot;,&quot;displayVariant&quot;:[],&quot;inventory_tracking&quot;:&quot;none&quot;,&quot;inventory_level&quot;:0,&quot;is_visible&quot;:true,&quot;availability&quot;:&quot;available&quot;,&quot;variants&quot;:[]}">
				<div class="product-list__item-content d-flex items-center justify-space-between border-bottom">
					<div class="d-flex items-center relative full-width">
                        						<div class="product-content__image">
							<img id="offer_img_273" src="https://cdn11.bigcommerce.com/s-8715e/products/273/images/373/373__45567.1683838256.200.200.jpg?c=2" target="_blank" href="https://www.jendcosafety.com/pleat-filter-16x16x2-12-case/" data-uw-rm-alt-original="" alt="16&quot;x16&quot;x2&quot; Pleat Filter (Secondary) 12/case" data-uw-rm-alt="CT">
						</div>
                        						<div class="product-content">
							<div class="offer-product-name fs-5 weight-medium" style="color: #192038;">16"x16"x2" Pleat Filter (Secondary) 12/case</div>
							<div class="product-price d-flex fs-5 weight-normal mt-8 offer-product-price">
                                                                <div class="price" style="color: rgba(255, 69, 0, 1)">$150.00</div>
                                							</div>
                            <div id="product-out-of-stock-273" class="new-modal-row out_of_stock" style="color: red"></div>
                                                                                                                                                                    </div>
                    </div>
					<div class="product-action d-flex items-center">
                                                <div class="number-input" style="color: #2E3A59;">
                            <input type="number" value="1" class="qtyInputLoose product-action__import weight-normal weight-normal product-quantity" min="0" max="8" style="background-color: #ffffff" data-uw-rm-form="fx" aria-label="Number" data-uw-hidden-control="hidden-control-element">
                            <div class="spinners">
                                <button class="spinner increment">▲</button>
                                <button class="spinner decrement">▼</button>
                            </div>
                        </div>
                                                <button id="ult-upsell-add-to-cart-273" class="btn-add fs-5 weight-medium text-white bg-black ml-6 pointer ult-upsell-add-to-cart" data-offer_item_price="150" data-offer_product="{&quot;id&quot;:&quot;273&quot;,&quot;name&quot;:&quot;16\&quot;x16\&quot;x2\&quot; Pleat Filter (Secondary) 12\/case&quot;,&quot;price&quot;:150,&quot;original_price&quot;:150,&quot;list_modifier_variant&quot;:[],&quot;url&quot;:&quot;\/pleat-filter-16x16x2-12-case\/&quot;,&quot;boost_option&quot;:[],&quot;cartMode&quot;:&quot;stockLeft&quot;,&quot;stockLeftCountdownBar&quot;:10,&quot;soldCountdownBar&quot;:90,&quot;stockLeftAmount&quot;:10,&quot;soldAmount&quot;:90,&quot;cartModeType&quot;:0,&quot;image&quot;:&quot;https:\/\/cdn11.bigcommerce.com\/s-8715e\/products\/273\/images\/373\/373__45567.1683838256.200.200.jpg?c=2&quot;,&quot;displayVariant&quot;:[],&quot;inventory_tracking&quot;:&quot;none&quot;,&quot;inventory_level&quot;:0,&quot;is_visible&quot;:true,&quot;availability&quot;:&quot;available&quot;,&quot;variants&quot;:[]}" style="background-color: rgba(255, 69, 0, 1); color: #ffffff; border-radius: 12px;">
                                Add to cart
                        </button>
					</div>
				</div>
			</div>
            			<div class="product-list__item modal-offer-product" data-peasi_product_type="offer" data-peasi_product_id="792" data-offer_product="{&quot;id&quot;:&quot;792&quot;,&quot;name&quot;:&quot;16\&quot;x16\&quot; HEPA Filter - H161606-99&quot;,&quot;price&quot;:194.36,&quot;original_price&quot;:194.36,&quot;list_modifier_variant&quot;:[],&quot;url&quot;:&quot;\/16x16-hepa-filter-final-h161606-99\/&quot;,&quot;boost_option&quot;:[],&quot;cartMode&quot;:&quot;stockLeft&quot;,&quot;stockLeftCountdownBar&quot;:10,&quot;soldCountdownBar&quot;:90,&quot;stockLeftAmount&quot;:10,&quot;soldAmount&quot;:90,&quot;cartModeType&quot;:0,&quot;image&quot;:&quot;https:\/\/cdn11.bigcommerce.com\/s-8715e\/products\/792\/images\/223251\/223251__40025.1683843482.200.200.jpg?c=2&quot;,&quot;displayVariant&quot;:[],&quot;inventory_tracking&quot;:&quot;none&quot;,&quot;inventory_level&quot;:0,&quot;is_visible&quot;:true,&quot;availability&quot;:&quot;available&quot;,&quot;variants&quot;:[]}">
				<div class="product-list__item-content d-flex items-center justify-space-between border-bottom">
					<div class="d-flex items-center relative full-width">
                        						<div class="product-content__image">
							<img id="offer_img_792" src="https://cdn11.bigcommerce.com/s-8715e/products/792/images/223251/223251__40025.1683843482.200.200.jpg?c=2" target="_blank" href="https://www.jendcosafety.com/16x16-hepa-filter-final-h161606-99/" data-uw-rm-alt-original="" alt="16&quot;x16&quot; HEPA Filter - H161606-99" data-uw-rm-alt="CT">
						</div>
                        						<div class="product-content">
							<div class="offer-product-name fs-5 weight-medium" style="color: #192038;">16"x16" HEPA Filter - H161606-99</div>
							<div class="product-price d-flex fs-5 weight-normal mt-8 offer-product-price">
                                                                <div class="price" style="color: rgba(255, 69, 0, 1)">$194.36</div>
                                							</div>
                            <div id="product-out-of-stock-792" class="new-modal-row out_of_stock" style="color: red"></div>
                                                                                                                                                                    </div>
                    </div>
					<div class="product-action d-flex items-center">
                                                <div class="number-input" style="color: #2E3A59;">
                            <input type="number" value="1" class="qtyInputLoose product-action__import weight-normal weight-normal product-quantity" min="0" max="8" style="background-color: #ffffff" data-uw-rm-form="fx" aria-label="Number" data-uw-hidden-control="hidden-control-element">
                            <div class="spinners">
                                <button class="spinner increment">▲</button>
                                <button class="spinner decrement">▼</button>
                            </div>
                        </div>
                                                <button id="ult-upsell-add-to-cart-792" class="btn-add fs-5 weight-medium text-white bg-black ml-6 pointer ult-upsell-add-to-cart" data-offer_item_price="194.36" data-offer_product="{&quot;id&quot;:&quot;792&quot;,&quot;name&quot;:&quot;16\&quot;x16\&quot; HEPA Filter - H161606-99&quot;,&quot;price&quot;:194.36,&quot;original_price&quot;:194.36,&quot;list_modifier_variant&quot;:[],&quot;url&quot;:&quot;\/16x16-hepa-filter-final-h161606-99\/&quot;,&quot;boost_option&quot;:[],&quot;cartMode&quot;:&quot;stockLeft&quot;,&quot;stockLeftCountdownBar&quot;:10,&quot;soldCountdownBar&quot;:90,&quot;stockLeftAmount&quot;:10,&quot;soldAmount&quot;:90,&quot;cartModeType&quot;:0,&quot;image&quot;:&quot;https:\/\/cdn11.bigcommerce.com\/s-8715e\/products\/792\/images\/223251\/223251__40025.1683843482.200.200.jpg?c=2&quot;,&quot;displayVariant&quot;:[],&quot;inventory_tracking&quot;:&quot;none&quot;,&quot;inventory_level&quot;:0,&quot;is_visible&quot;:true,&quot;availability&quot;:&quot;available&quot;,&quot;variants&quot;:[]}" style="background-color: rgba(255, 69, 0, 1); color: #ffffff; border-radius: 12px;">
                                Add to cart
                        </button>
					</div>
				</div>
			</div>
            			<div class="product-list__item modal-offer-product" data-peasi_product_type="offer" data-peasi_product_id="183523" data-offer_product="{&quot;id&quot;:&quot;183523&quot;,&quot;name&quot;:&quot;10\&quot; Locking Clamp for Flex Duct Attachment&quot;,&quot;price&quot;:53.96,&quot;original_price&quot;:53.96,&quot;list_modifier_variant&quot;:[],&quot;url&quot;:&quot;\/10-locking-clamp-for-flex-duct-attachment\/&quot;,&quot;boost_option&quot;:[],&quot;cartMode&quot;:&quot;stockLeft&quot;,&quot;stockLeftCountdownBar&quot;:10,&quot;soldCountdownBar&quot;:90,&quot;stockLeftAmount&quot;:10,&quot;soldAmount&quot;:90,&quot;cartModeType&quot;:0,&quot;image&quot;:&quot;https:\/\/cdn11.bigcommerce.com\/s-8715e\/products\/183523\/images\/213607\/213607__04979.1683841749.200.200.jpg?c=2&quot;,&quot;displayVariant&quot;:[],&quot;inventory_tracking&quot;:&quot;none&quot;,&quot;inventory_level&quot;:0,&quot;is_visible&quot;:true,&quot;availability&quot;:&quot;available&quot;,&quot;variants&quot;:[]}">
				<div class="product-list__item-content d-flex items-center justify-space-between border-bottom">
					<div class="d-flex items-center relative full-width">
                        						<div class="product-content__image">
							<img id="offer_img_183523" src="https://cdn11.bigcommerce.com/s-8715e/products/183523/images/213607/213607__04979.1683841749.200.200.jpg?c=2" target="_blank" href="https://www.jendcosafety.com/10-locking-clamp-for-flex-duct-attachment/" data-uw-rm-alt-original="" alt="10&quot; Locking Clamp for Flex Duct Attachment" data-uw-rm-alt="CT">
						</div>
                        						<div class="product-content">
							<div class="offer-product-name fs-5 weight-medium" style="color: #192038;">10" Locking Clamp for Flex Duct Attachment</div>
							<div class="product-price d-flex fs-5 weight-normal mt-8 offer-product-price">
                                                                <div class="price" style="color: rgba(255, 69, 0, 1)">$53.96</div>
                                							</div>
                            <div id="product-out-of-stock-183523" class="new-modal-row out_of_stock" style="color: red"></div>
                                                                                                                                                                    </div>
                    </div>
					<div class="product-action d-flex items-center">
                                                <div class="number-input" style="color: #2E3A59;">
                            <input type="number" value="1" class="qtyInputLoose product-action__import weight-normal weight-normal product-quantity" min="0" max="8" style="background-color: #ffffff" data-uw-rm-form="fx" aria-label="Number" data-uw-hidden-control="hidden-control-element">
                            <div class="spinners">
                                <button class="spinner increment">▲</button>
                                <button class="spinner decrement">▼</button>
                            </div>
                        </div>
                                                <button id="ult-upsell-add-to-cart-183523" class="btn-add fs-5 weight-medium text-white bg-black ml-6 pointer ult-upsell-add-to-cart" data-offer_item_price="53.96" data-offer_product="{&quot;id&quot;:&quot;183523&quot;,&quot;name&quot;:&quot;10\&quot; Locking Clamp for Flex Duct Attachment&quot;,&quot;price&quot;:53.96,&quot;original_price&quot;:53.96,&quot;list_modifier_variant&quot;:[],&quot;url&quot;:&quot;\/10-locking-clamp-for-flex-duct-attachment\/&quot;,&quot;boost_option&quot;:[],&quot;cartMode&quot;:&quot;stockLeft&quot;,&quot;stockLeftCountdownBar&quot;:10,&quot;soldCountdownBar&quot;:90,&quot;stockLeftAmount&quot;:10,&quot;soldAmount&quot;:90,&quot;cartModeType&quot;:0,&quot;image&quot;:&quot;https:\/\/cdn11.bigcommerce.com\/s-8715e\/products\/183523\/images\/213607\/213607__04979.1683841749.200.200.jpg?c=2&quot;,&quot;displayVariant&quot;:[],&quot;inventory_tracking&quot;:&quot;none&quot;,&quot;inventory_level&quot;:0,&quot;is_visible&quot;:true,&quot;availability&quot;:&quot;available&quot;,&quot;variants&quot;:[]}" style="background-color: rgba(255, 69, 0, 1); color: #ffffff; border-radius: 12px;">
                                Add to cart
                        </button>
					</div>
				</div>
			</div>
            		</div>
		<div class="product-popup__footer d-flex items-center justify-content-center">
			<button class="product-popup__footer-stop pointer btn-cancel callout-button" action="2" style="
                    color: rgba(17, 17, 17, 1);
                    background-color:  transparent;
                    border-radius: 4px;
                ">
                No, Thanks
            </button>
            <button class="btn-continue weight-medium pointer callout-button" action="2" style="
                    color: #FFFFFF;
                    background-color:  rgba(17, 17, 17, 1);
                    border-radius: 4px;
                ">
                 Continue
            </button>
		</div>
	</div>
</div>
<script>
    // Set the date we're counting down to
    // var countDownDate = new Date("Apr 22, 2020 10:37:25").getTime();
    var offer_type = "crosssell";
    var v1_response_data = {"name":"PRED750 v2","groupName":"","content":{"layout":{"backgroundColor":"#ffffff"},"header":{"label":"Keep Your Predator 750 Job-Ready","textColor":"rgba(17, 17, 17, 1)","backgroundColor":"#ffffff","closeIconColor":"rgba(17, 17, 17, 1)","headerSubtitle":{"isEnabled":true,"label":"Recommended Essentials for Peak Performance","textColor":"rgba(17, 17, 17, 1)"}},"calloutBtn":{"firstButton":{"label":"No, Thanks","action":2,"textColor":"rgba(17, 17, 17, 1)","backgroundColor":"transparent","buttonRadius":4},"secondButton":{"label":"Continue","action":"2","textColor":"#FFFFFF","backgroundColor":"rgba(17, 17, 17, 1)","buttonRadius":4}},"footerTotalPrice":{"label":"Total","textColor":"#85929E","priceColor":"#26C97B","comparedPriceColor":"#8F9BB3","labelDiscountColor":"#26C97B"},"triggerProduct":{"isEnabled":false,"productDetail":{"nameColor":"#192038","priceColor":"rgba(17, 17, 17, 1)","variantColor":"#64738F","quantityColor":"#64738F","backgroundColor":"#D3FCD8"},"addedState":{"label":"You just added this item to your cart.","textColor":"#73879C","iconColor":"#58D144"}},"offerProducts":{"message":{"isEnabled":true,"content":"Hang on! We have this offer just for you","textColor":"#192038"},"appearance":{"productTitleColor":"#192038","priceColor":"rgba(255, 69, 0, 1)","isShowProductImage":true},"comparedPrice":{"isEnabled":true,"textColor":"#8F9BB3"},"discountLabel":{"isEnabled":true,"textColor":"#FFFFFF","backgroundColor":"#008000"},"variantSelector":{"isEnabled":true,"textColor":"#2E3A59","backgroundColor":"#ffffff"},"quantitySelector":{"isEnabled":true,"textColor":"#2E3A59","backgroundColor":"#ffffff","content":"Quantity"},"addToCartBtn":{"label":"Add to cart","textColor":"#ffffff","backgroundColor":"rgba(255, 69, 0, 1)","hoverTextColor":"#ffffff","hoverBackgroundColor":"#13906D","buttonRadius":12,"pressedLabel":"Added","pressedTextColor":"#ffffff","pressedBackgroundColor":"#0C7461"}},"countdownTimer":{"isEnabled":false,"appearanceType":0,"label":"Offers end in","minutes":"05","hours":"00","seconds":"00","messageColor":"#222b45","messageBackgroundColor":"#fe5c11","timerColor":"#c62d08","timerBackgroundColor":"#192038","iconColor":"#8f9bb3"},"countdownCart":{"isEnabled":false,"type":0,"messageColor":"#C1C4CD","countdownBarColor":"#F60909","defaultValue":{"message":"Hurry up! Only ... left in stock","countdownBar":90},"customizedValue":[{"message":"Hurry up! Only ... left in stock","countdownBar":90,"offerProductId":null}]},"discountProgressContent":{"lastMessage":"Congratulation! You have a {{discount_1}}% discount!","freeShippingGoalMessage":"Congratulation! You have got FREE SHIPPING!","discountThresholdContent":{"freeShippingMessage":"Only {{amount_left}} away from FREE SHIPPING!","percentageMessage":["Reach {{goal_1}} to get {{discount_1}}% OFF!"]},"progressBar":{"progressColor":"#1BAC75","backgroundColor":"#C5CEE0","achievedColor":"#1BAC75","unAchievedColor":"#C5CEE0"},"threshold":[{"label":"{{discount_1}}% OFF","textColor":"#1BAC75","backgroundColor":"#ffffff","borderColor":"#1BAC75"}]},"templateId":null},"type":"crosssell","position":"Product page","template":9,"offerItems":[{"id":"270","name":"16\"x16\" Hog Hair Filters (Primary) 12\/case","price":57.6,"original_price":57.6,"list_modifier_variant":[],"url":"\/hog-hair-filters-16x16-12-cs\/","boost_option":[],"cartMode":"stockLeft","stockLeftCountdownBar":10,"soldCountdownBar":90,"stockLeftAmount":10,"soldAmount":90,"cartModeType":0,"image":"https:\/\/cdn11.bigcommerce.com\/s-8715e\/products\/270\/images\/370\/370__94001.1683837907.200.200.jpg?c=2","displayVariant":[],"inventory_tracking":"none","inventory_level":0,"is_visible":true,"availability":"available","variants":[]},{"id":"273","name":"16\"x16\"x2\" Pleat Filter (Secondary) 12\/case","price":150,"original_price":150,"list_modifier_variant":[],"url":"\/pleat-filter-16x16x2-12-case\/","boost_option":[],"cartMode":"stockLeft","stockLeftCountdownBar":10,"soldCountdownBar":90,"stockLeftAmount":10,"soldAmount":90,"cartModeType":0,"image":"https:\/\/cdn11.bigcommerce.com\/s-8715e\/products\/273\/images\/373\/373__45567.1683838256.200.200.jpg?c=2","displayVariant":[],"inventory_tracking":"none","inventory_level":0,"is_visible":true,"availability":"available","variants":[]},{"id":"792","name":"16\"x16\" HEPA Filter - H161606-99","price":194.36,"original_price":194.36,"list_modifier_variant":[],"url":"\/16x16-hepa-filter-final-h161606-99\/","boost_option":[],"cartMode":"stockLeft","stockLeftCountdownBar":10,"soldCountdownBar":90,"stockLeftAmount":10,"soldAmount":90,"cartModeType":0,"image":"https:\/\/cdn11.bigcommerce.com\/s-8715e\/products\/792\/images\/223251\/223251__40025.1683843482.200.200.jpg?c=2","displayVariant":[],"inventory_tracking":"none","inventory_level":0,"is_visible":true,"availability":"available","variants":[]},{"id":"183523","name":"10\" Locking Clamp for Flex Duct Attachment","price":53.96,"original_price":53.96,"list_modifier_variant":[],"url":"\/10-locking-clamp-for-flex-duct-attachment\/","boost_option":[],"cartMode":"stockLeft","stockLeftCountdownBar":10,"soldCountdownBar":90,"stockLeftAmount":10,"soldAmount":90,"cartModeType":0,"image":"https:\/\/cdn11.bigcommerce.com\/s-8715e\/products\/183523\/images\/213607\/213607__04979.1683841749.200.200.jpg?c=2","displayVariant":[],"inventory_tracking":"none","inventory_level":0,"is_visible":true,"availability":"available","variants":[]}],"discount":[],"currency":{"token_location":"left","token":"$","decimal_token":".","thousands_token":",","decimal_places":2,"is_transactional":true,"currency_exchange_rate":"1.0000000000"},"base_currency":"$","rate":1,"origin_url":"https:\/\/www.jendcosafety.com","smart_control":{"isUsingSmartControl":false,"isHideOfferSetting":false,"isHidePictureProduct":false,"isHideOfferTimeSettings":true,"hideOfferTimeSettings":"5"},"customCss":"\/* Anchor the badge to the image box *\/ #layout-basic-ecom-9 #layout-basic-ecom-9 .modal-offer-product[data-peasi_product_id=\"270\"] .product-content__image{   position: relative !important;   overflow: visible !important; }  \/* The badge itself *\/ #layout-basic-ecom-9 #layout-basic-ecom-9 .modal-offer-product[data-peasi_product_id=\"270\"] .product-content__image::after{   content: \"\u2714 Recommended\";   position: absolute;   top: 6px;   left: 6px;   z-index: 10;   display: inline-block;   padding: 2px 8px;   font-size: 12px;   font-weight: 600;   border-radius: 999px;   background: #e8f5e9;   color: #2e7d32;   box-shadow: 0 1px 2px rgba(0,0,0,.06);   pointer-events: none; } ","globalStyles":null};
    currency_v1 = v1_response_data.currency;
    $('#ult-upsell-popup-modal').addClass('new-modal-multiple')
    var timerStarted = false;
    var coupon_code = v1_response_data.discount.coupon_code;
    var store_domain = $(location).attr('hostname');
    var quantity = 1;
    var modifier_array = [];
    var isAddedToCart = false;


    function popupShowed() {
        $('.tds-new-modal.new-modal-multiple .new-modal-content').css('width', 'fit-content')
        $('.tds-new-modal.new-modal-multiple .new-modal-content').css('padding', '0px')
        $('.modal-offer-product').each(function() {
            let offer_product = $(this).find('.ult-upsell-add-to-cart').data('offer_product')
             /* default modifier variant */
            modifier_array = getDefaultModifierVariant(v1_response_data.offerItems);
            changeProductPrice($(this), offer_product, v1_response_data, modifier_array)
        })

        if (position == 1) {
            let price = ''
            if ($('.productView-price').find('.price--withoutTax').length !== 0) {
                price = $('.productView-price').find('.price--withoutTax')[0].textContent
            } else if ($('.productView-price').find('.price--withTax').length !== 0) {
                price = $('.productView-price').find('.price--withTax')[0].textContent
            }
            if (price != '') {
                var trigger_quantity = $('.form-input--incrementTotal').val();
                if (trigger_quantity == "" || !Number(trigger_quantity) || parseInt(trigger_quantity) < 1 )
                    trigger_quantity = 1;
                else trigger_quantity = parseInt(trigger_quantity)
                price = parseFloat(price.replace(/[^0-9\.]+/g, ""));
                $("#trigger-quantity").text("Quantity: " + trigger_quantity)
                var total_price = price * trigger_quantity
                $(".trigger-product-price").text(peasiPriceFormat(total_price, currency_v1))
            }
        } else {
            let price = 0;
            cart_items.forEach((cart_item) => {
                if (cart_item.productId == product_id) {
                    price = cart_item.salePrice
                }
            })
            if (price) {
                $(".trigger-product-price").text(peasiPriceFormat(currency_v1.is_transactional? price : price * rate, currency_v1))
            }
        }
    }

    // Update the count down every 1 second
    function startTimer() {
        if (v1_response_data.content && v1_response_data.content.countdownTimer && v1_response_data.content.countdownTimer.isEnabled && !timerStarted) {
            timerStarted = true;
            const countdownTimer = v1_response_data.content.countdownTimer;
            var minutes = parseInt(countdownTimer.minutes);
            var hours = parseInt(countdownTimer.hours);
            var seconds = parseInt(countdownTimer.seconds);
            var countdownInterval = setInterval(function () {
                if (seconds > 0) {
                    seconds--;
                } else {
                    seconds = 59;
                    if (minutes > 0) {
                        minutes--;
                    } else {
                        minutes = 59;
                        if (hours > 0) {
                            hours--;
                        } else {
                            clearInterval(countdownInterval);
                        return;
                        }
                    }
                }
                $('#sale-hours').text(hours < 10 ? '0' + hours : hours);
                $('#sale-minutes').text(minutes < 10 ? '0' + minutes : minutes);
                $('#sale-seconds').text(seconds < 10 ? '0' + seconds : seconds);
            }, 1000);
        }
    }

    $(".ult-upsell-add-to-cart").on("click", function() {
        var offer_product = $(this).data('offer_product')
        if ($('#product-out-of-stock-' + offer_product.id).text().trim().length == 0) {
            quantity = $(this).parent().find(".product-quantity").val()
            if(quantity == "" || !Number(quantity) || parseInt(quantity) <= 0 )
                quantity = 1;
            let selected_options_in_popup = {}
            $(this).parent().parent().find(".new-modal-body__variant select").each(function(){
                console.log($(this).attr('name'), $(this).find("option:selected").val())
                selected_options_in_popup[$(this).attr('name')] = $(this).find("option:selected").val()
            })

            let added_offer_product_id = offer_product.id;
            let added_variant_id = getVariantIdByOptions(offer_product, selected_options_in_popup)
            let added_offer_product_price = $(this).data('offer_item_price');
            let index = getIndexOfAddedProductInOfferProducts(v1_response_data.offerItems, added_offer_product_id);

            // handle other modifiers
            if (offer_product.other_modifiers && offer_product.other_modifiers.length) {
                modifier_array[index] = changeOtherModifierValues(modifier_array[index], offer_product, offer_type)
                let hasUncheckModifiers = validateModifiers(modifier_array[index], offer_product, offer_type)
                if (hasUncheckModifiers) {
                    return
                }
            }

            $(this).attr('disabled', true);
            $(this).css('opacity', 0.65);
            $(this).closest('.modal-offer-product').find('.variant-option').attr('disabled', true);
            $(this).css('background-color', 'rgba(255,255,255,.9)');
            $(this).html('<div class="loadingOverlay" style="display: block;"></div>')

            addToCart(quantity, cart_id, added_offer_product_id, added_variant_id, modifier_array[index], added_offer_product_price, addToCartConversion);
        }
    })

    function addToCartConversion(offer_product_id, offer_item_price, offer_item_name) {
        isAddedToCart = true;
        storeConversion(offer_id, "POPUP_ADD_TO_CART", position, cart_id, product_id, offer_item_price, [offer_product_id], [offer_item_name], [offer_item_price], quantity,
            () => {
                if (coupon_code) addCouponToCart(cart_id, store_domain, coupon_code, () => {});
                if (offer_type == 'upsell') {
                    removeTriggerProduct(cart_id, cart_items, product_id, position)
                } else {
                    $('#ult-upsell-add-to-cart-' + offer_product_id).html(v1_response_data.content.offerProducts.addToCartBtn.pressedLabel || "&#10004; Added")
                    $('#ult-upsell-add-to-cart-' + offer_product_id).addClass('added')
                }
            });
    }

    $('.variant-option').each(function() {
        let modal_body = $(this).closest('.modal-offer-product');
        checkStock(modal_body);
    })

    $('.modal-offer-product').each(function() {
        let modal_body = $(this);
        checkStock(modal_body);
    })

    $('.variant-option').on('change', function() {
        let modal_body = $(this).closest('.modal-offer-product');
        checkStock(modal_body);
        let offer_product = modal_body.find('.ult-upsell-add-to-cart').data('offer_product')
        return_data = changeProductPrice(modal_body, offer_product, v1_response_data, modifier_array);
        modifier_array = return_data[1];
    })

    $(".spinner.increment").on("click", function() {
        value =  $(this).parents('.number-input').children('input').val()
        $(this).parents('.number-input').children('input').val(Number(value) + 1)
    })
    $(".spinner.decrement").on("click", function() {
        value =  $(this).parents('.number-input').children('input').val()
        if(value == 1)
            return
        $(this).parents('.number-input').children('input').val(Number(value) - 1)
    })
    $('.callout-button').on('click', function() {
        let action = $(this).attr('action');
        handleClickedCalloutButton(action, position, isAddedToCart);
    })
    $('.new-modal-header__close').on('click', function() {
        $('#ult-upsell-popup-modal').removeClass("active");
        $('#ult-upsell-popup-modal').hide();
        if(isAddedToCart) {
            handleRedirectToClosePopup(position);
        }
    })
</script>
